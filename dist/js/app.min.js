var app=angular.module("weatherApp",[]);app.controller("widgetCtrl",function(s,e,a){var t=config.apiKey;function c(e){switch(e){case"sunny":case"clear":case"mostlysunny":return"sunny";case"cloudy":case"mostlycloudy":return"cloudy";case"partlysunny":case"partlycloudy":return"partlycloudy";case"tstorms":case"chancetstorms":return"tstorms";case"rain":case"chancerain":return"rain";case"sleet":case"chancesleet":case"flurries":case"chanceflurries":case"snow":case"chancesnow":return"snow";case"fog":case"hazy":return"fog"}return"sunny"}s.widgetStatus="weather",s.refreshData=function(){(new Date).getHours();s.widgetStatus="weather",e.get("http://api.wunderground.com/api/"+t+"/forecast/hourly/alerts/conditions/q/OH/Columbus.json").then(function(e){200===e.status&&function(e){var a=e.current_observation,t=e.forecast.simpleforecast.forecastday,r=e.forecast.txt_forecast.forecastday[0];s.forecastData=[];for(var o=0;o<3;o++){var n={dayOfWeek:t[o].date.weekday,monthShortname:t[o].date.monthname_short,date:t[o].date.day,icon:c(t[o].icon),condition:t[o].conditions,hiTemp:Number(t[o].high.fahrenheit),loTemp:Number(t[o].low.fahrenheit),pop:t[o].pop,popIcon:"rain"};0===o&&(n.icon=c(a.icon),n.condition=a.weather,n.description=r.fcttext,n.currentTemp=Number(a.temp_f).toFixed(0),n.feelsLike=Number(a.feelslike_f).toFixed(0),n.lastUpdated=a.observation_time),(void 0!==n.currentTemp&&n.currentTemp<32||(n.hiTemp+n.loTemp)/2<32)&&(n.popIcon="snow"),s.forecastData.push(n)}s.weatherData1=s.forecastData[0],s.weatherData2=s.forecastData[1],s.weatherData3=s.forecastData[2]}(e.data)}),a(s.refreshData,3e5)},s.refreshData()});